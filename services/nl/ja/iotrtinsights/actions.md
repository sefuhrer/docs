---

copyright:
  years: 2015,2016

---

{:shortdesc: .shortdesc}

# アクション・タイプ{: #actions}

アラート・ダッシュボードでのアラートの表示に加え、{{site.data.keyword.iotrtinsights_short}} では、E メールの送信や Webhook の送信など、ルールでトリガーされる複数のタイプのアクションがサポートされます。
{: shortdesc}

## アクションの作成{: #shared}
[ルール・エディターから直接アクションを作成](rules.html "ルールの作成")したり、「アクション」パネルでアクションを作成してからルールの作成時にそのアクションを選択したりすることができます。

「アクション」パネルでアクションを作成するには、以下のようにします。
1. {{site.data.keyword.iotrtinsights_short}}  コンソールで、**「分析 (Analytics)」>「アクション」**に移動します。
2. **「新規アクションの追加 (Add new action)」**をクリックして、アクション・タイプを選択し、アクションに名前を付け、説明を指定します。
3. 作成しているタイプのアクションの必須パラメーターを指定します。
アクション・タイプ:  
 - [E メール送信](#email "E メール送信")
 - [Webhook](#webhook "Webhook")
 - [Node-RED](#nodered "Node-RED")
 - [IFTTT](#ifttt "IFTTT")
4. **「OK」**をクリックして新規アクションを作成します。

これで、アクションが[ルール・エディター](rules.html#rules "ルール・エディター")で使用可能になりました。



## E メール送信{: #email}
E メール送信アクションは、ルールがトリガーされたときに 1 人以上の受信者に E メールを送信する場合に使用します。

例: [E メール送信](action_examples.html#emailex)。

以下のパラメーターを使用して、E メール送信アクションを構成します。

パラメーター | 説明
---|---
名前 | アクションの名前。これは、アラート・ダッシュボードで使用されます。
説明 | アクションの要旨。
To | コンマで区切った、1 つ以上の E メール・アドレス。
Cc | コンマで区切った、1 つ以上の E メール・アドレス。
件名 (Subject) | E メールの件名行。オプションとして、件名の先頭を自動的に「IoT Real-Time Insight アラート」にすることができます。

E メールの本文は、ルールのトリガー時におけるデバイスのメッセージから自動的に作成されます。  
**重要:** デバイス・データに機密情報が含まれている場合には、デバイス・データを E メール・メッセージに含めないこと、およびアラート・パネルでのみ機密データを表示することを選択できます。


## Webhook {: #webhook}
Webhook アクションは、アラートのトリガー時に Webhook 対応 Web サービスに HTTP 要求を行う場合に使用します。例えば、Webhook を使用して、デバイスのセンサーが異常な測定値を報告した場合に資産のサービス要求をオープンすることができます。

例: [Webhook を使用した Slack への投稿](action_examples.html#webhookex)。

以下のパラメーターを使用して、Webhook アクションを構成します。

パラメーター | 説明
---|---
名前 | アクションの名前。これは、アラート・ダッシュボードで使用されます。
説明 | アクションの要旨。
URL | ターゲットの Webhook 対応サーバーの URL。**ヒント:** [変数置換](#variable_substitution)を使用して、追加データを URL に動的に含めることができます。
メソッド (Method) | 実行する Webhook 呼び出しのタイプ。GET、HEAD、OPTIONS、PATCH、PUT、POST、DELETE のいずれかのタイプを選択します。
ユーザー名 | Web サービスで必要な場合は含めます。
パスワード | Web サービスで必要な場合は含めます。**重要:** パスワードは、平文で送信されます。
ヘッダー (Header) | ヘッダーは、キーと値の組で構成されます。**ヒント:** [変数置換](#variable_substitution)を使用して、追加データをヘッダーに動的に含めることができます。
コンテンツ・タイプ (Content type) | 本文のコンテンツ・タイプ (JSON、XML、エンコードされた WWW フォーム URL、またはプレーン・テキスト)。OPTIONS、PATCH、PUT、POST、および DELETE の各メソッドで使用可能です。
本文 | Webhook 呼び出しの本文。OPTIONS、PATCH、PUT、POST、および DELETE の各メソッドで使用可能です。デフォルトでは、本文フィールドには、[変数置換](#variable_substitution)でリストされているすべての変数が事前に入力されています。本文フィールドの内容を編集するには、**「カスタマイズしたメッセージ本文の使用 (Use customized message body)」**を選択します。**重要:** Webhook サーバーでは、特定のフィールドが本文に含まれている必要がある場合があります。例えば、Slack Webhook では、「text」フィールドが含まれている必要があります。   



## Node-RED {: #nodered}
Node-RED アクションは、ルールのトリガー時に Node-RED アプリケーションに接続する場合に使用します。Node-RED の使用について詳しくは、『[モノのインターネット・スターター・アプリケーションによるアプリの作成](https://www.ng.bluemix.net/docs/starters/IoT/iot500.html#iot500)』を参照してください。

例: [Node-RED を使用したテキスト・メッセージの送信](action_examples.html#noderedex)。

以下のパラメーターを使用して、Node-RED アクションを構成します。

パラメーター | 説明
---|---
名前 | アクションの名前。これは、アラート・ダッシュボードで使用されます。
説明 | アクションの要旨。
URL | ターゲットの Node-RED HTTP 入力ノードの URL。
ユーザー名 | Node-RED サービスで必要な場合は含めます。
パスワード | Node-RED サービスで必要な場合は含めます。**重要:** パスワードは、平文で送信されます。
本文 | デフォルトでは、本文フィールドには、[変数置換](#variable_substitution)でリストされているすべての変数が事前に入力されています。本文フィールドの内容を編集するには、**「カスタマイズしたメッセージ本文の使用 (Use customized message body)」**を選択します。

## IFTTT {: #ifttt}
IFTTT アクションは、ルールのトリガー時に IFTTT レシピをトリガーする場合に使用します。IFTTT レシピとしての Real-Time Insights アクションのトリガーについて詳しくは、IFTTT サイトで『[Maker Channel](https://ifttt.com/maker)』を参照してください。

例: [IFTTT を使用した Trello カードの投稿](action_examples.html#iftttex)。

以下のパラメーターを使用して、IFTTT アクションを構成します。

パラメーター | 説明
---|---
名前 | アクションの名前。これは、アラート・ダッシュボードで使用されます。
説明 | アクションの要旨。
キー (Key) | イベントのトリガーに使用する Maker チャネル・キー。
イベント | Maker イベントのトリガーとして構成したイベント名。異なるトリガーを持つ複数のレシピを作成し、それぞれに異なるイベント名を含めることができます。
「値 1 (Value 1)」から「値 3 (Value 3)」 | これらのパラメーターでコンテンツを渡すことができます。コンテンツは、IFTTT レシピのアクションに渡されます。**ヒント:** [変数置換](#variable_substitution)を使用して、ヘッダーで追加データを動的に含めることができます。

## 変数置換 {: #variable_substitution}
以下の変数置換を組み込んで、デバイス・データを動的に含めます。変数は二重中括弧で囲む必要があります。

変数 | 説明
---|---
**URL、ヘッド、および本文** |
`{{timestamp}}` | メッセージからのタイム・スタンプ
`{{tenantId}}` | Real-Time Insights サービスの ID
`{{deviceId}}` | デバイスの ID
`{{ruleName}}` | アクションが含まれているルールの名前
**本文のみ** |
`{{ruleDescription}}`| アクションが含まれているルールの説明
`{{ruleCondition}}` | アクションをトリガーしたルール条件
`{{message}}` | ルールをトリガーしたデータ・ポイント値が含まれていたロー・デバイス・メッセージ
